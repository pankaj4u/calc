<div class="page-header">
    <h1>English Chinese Dictionary Translate      
    </h1>
</div>
 
<form class="form-inline">
    <input type="text" id="word" class="search-query" placeholder="english word.. "required>
    <button class="btn btn-primary">Translate</button>
</form>

<div id="result" class="hide">
    <h2>Meaning / Translation</h2>
    <ul></ul>
</div>
<script>
function show_result(data) {
    $("#result ul").text('');
    $.each(data.query.pages, function(page_id, page) {
        if (page.iwlinks === undefined) {
            $("#result ul").append('no results');
            return false; // break
        }
        $.each(page.iwlinks, function(i, el) {
            var trans = el['*'];
            trans = trans.replace('Special:Search/', '').replace('_', ' ');
            $("#result ul").append('<li>' + trans + '</li>');
        });
    });
    $("#result").fadeIn('fast');
}

function translate() {
    $("#result").fadeOut('fast');
    $.ajax({
        url: 'http://en.wiktionary.org/w/api.php',
        data: {
            action: 'query',
            prop: 'iwlinks',
            format: 'json',
            iwlimit: 500,
            iwprefix: 'zh',
            titles: $('#word').val()
        },
        dataType: 'jsonp',
        success: show_result
    });
    return false;
}

$('form').submit(translate);
$('#word').focus();
</script>
